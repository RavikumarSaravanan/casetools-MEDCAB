<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Dashboard - Ambulance Booking System</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
        }
        
        .header {
            background: linear-gradient(135deg, #0077b6, #00b4d8);
            color: white;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0077b6;
            font-weight: bold;
        }
        
        .nav-buttons button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s;
        }
        
        .nav-buttons button:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .container {
            display: flex;
            min-height: calc(100vh - 70px);
        }
        
        .sidebar {
            width: 250px;
            background: white;
            padding: 20px 0;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            padding: 15px 30px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sidebar-menu li:hover, .sidebar-menu li.active {
            background: #e3f2fd;
            border-left: 4px solid #0077b6;
        }
        
        .sidebar-menu li i {
            width: 20px;
        }
        
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .dashboard-title h1 {
            font-size: 28px;
            color: #0077b6;
        }
        
        .dashboard-title p {
            color: #666;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .icon-blue { background: #e3f2fd; color: #0077b6; }
        .icon-green { background: #e8f5e9; color: #4caf50; }
        .icon-orange { background: #fff3e0; color: #ff9800; }
        .icon-red { background: #ffebee; color: #f44336; }
        
        .stat-info h3 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .stat-info p {
            color: #666;
            font-size: 14px;
        }
        
        .content-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-header h2 {
            color: #0077b6;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary { background: #0077b6; color: white; }
        .btn-primary:hover { background: #023e8a; }
        
        .btn-success { background: #4caf50; color: white; }
        .btn-success:hover { background: #388e3c; }
        
        .btn-warning { background: #ff9800; color: white; }
        .btn-warning:hover { background: #f57c00; }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: #f5f7fa;
            color: #666;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f5f7fa;
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-pending { background: #ffecb3; color: #ff9800; }
        .status-confirmed { background: #bbdefb; color: #2196f3; }
        .status-completed { background: #c8e6c9; color: #4caf50; }
        
        .action-buttons button {
            padding: 6px 12px;
            font-size: 14px;
            margin-right: 5px;
        }
        
        .map-container {
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }
        
        #map {
            height: 100%;
            width: 100%;
        }
        
        .booking-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .form-group textarea {
            height: 100px;
            resize: vertical;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">üè• Ambulance Booking System</div>
        <div class="user-info">
            <div class="user-avatar" id="hospitalAvatar">H</div>
            <div>
                <div id="hospitalName">City General Hospital</div>
                <div style="font-size: 12px; opacity: 0.8;">Hospital Dashboard</div>
            </div>
            <div class="nav-buttons">
                <button onclick="logout()">Logout</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <ul class="sidebar-menu">
                <li class="active" onclick="showSection('dashboard')">
                    <span>üìä</span> Dashboard
                </li>
                <li onclick="showSection('bookings')">
                    <span>üìã</span> All Bookings
                </li>
                <li onclick="showSection('new-booking')">
                    <span>‚ûï</span> New Booking
                </li>
                <li onclick="showSection('drivers')">
                    <span>üöó</span> Drivers
                </li>
                <li onclick="showSection('reports')">
                    <span>üìà</span> Reports
                </li>
            </ul>
        </div>
        
        <div class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard-section">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Hospital Dashboard</h1>
                        <p>Welcome back! Here's what's happening today.</p>
                    </div>
                </div>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon icon-blue">üìã</div>
                        <div class="stat-info">
                            <h3 id="totalBookings">24</h3>
                            <p>Total Bookings</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon icon-green">‚úÖ</div>
                        <div class="stat-info">
                            <h3 id="completedBookings">18</h3>
                            <p>Completed Today</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon icon-orange">‚è≥</div>
                        <div class="stat-info">
                            <h3 id="activeBookings">4</h3>
                            <p>Active Rides</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon icon-red">üö®</div>
                        <div class="stat-info">
                            <h3 id="emergencyBookings">2</h3>
                            <p>Emergency Cases</p>
                        </div>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>Recent Bookings</h2>
                        <button class="btn btn-primary" onclick="loadBookings()">Refresh</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Booking ID</th>
                                <th>Patient</th>
                                <th>Type</th>
                                <th>Status</th>
                                <th>Assigned Driver</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="recentBookingsTable">
                            <tr>
                                <td colspan="6" style="text-align: center;">Loading bookings...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- All Bookings Section -->
            <div id="bookings-section" style="display: none;">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>All Bookings</h1>
                        <p>Manage all ambulance bookings</p>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>Booking Management</h2>
                        <div>
                            <button class="btn btn-primary" onclick="loadBookings()">Refresh</button>
                        </div>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Booking ID</th>
                                <th>Patient Name</th>
                                <th>Contact</th>
                                <th>Type</th>
                                <th>Booking Time</th>
                                <th>Status</th>
                                <th>Driver</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="allBookingsTable">
                            <tr>
                                <td colspan="8" style="text-align: center;">Loading bookings...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- New Booking Section -->
            <div id="new-booking-section" style="display: none;">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>New Ambulance Booking</h1>
                        <p>Create a new ambulance request</p>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>Booking Form</h2>
                    </div>
                    
                    <form id="bookingForm" class="booking-form">
                        <div class="form-group">
                            <label for="patientName">Patient Name *</label>
                            <input type="text" id="patientName" name="patientName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="contactNumber">Contact Number *</label>
                            <input type="tel" id="contactNumber" name="contactNumber" required>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="pickupAddress">Pickup Address *</label>
                            <textarea id="pickupAddress" name="pickupAddress" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="bookingDateTime">Preferred Time *</label>
                            <input type="datetime-local" id="bookingDateTime" name="bookingDateTime" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="ambulanceType">Ambulance Type *</label>
                            <select id="ambulanceType" name="ambulanceType" required>
                                <option value="">Select Type</option>
                                <option value="basic">Basic Life Support</option>
                                <option value="advanced">Advanced Life Support</option>
                                <option value="neonatal">Neonatal</option>
                                <option value="cardiac">Cardiac Care</option>
                            </select>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="medicalCondition">Medical Condition</label>
                            <textarea id="medicalCondition" name="medicalCondition" placeholder="Describe patient's condition..."></textarea>
                        </div>
                        
                        <div class="form-group full-width" style="text-align: right;">
                            <button type="reset" class="btn btn-warning">Reset</button>
                            <button type="submit" class="btn btn-success">Create Booking</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Drivers Section -->
            <div id="drivers-section" style="display: none;">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Drivers & Vehicles</h1>
                        <p>Manage ambulance drivers and vehicles</p>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>Available Drivers</h2>
                        <button class="btn btn-primary" onclick="loadDrivers()">Refresh</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Driver Name</th>
                                <th>Vehicle Number</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th>Current Booking</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="driversTable">
                            <tr>
                                <td colspan="6" style="text-align: center;">Loading drivers...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Reports Section -->
            <div id="reports-section" style="display: none;">
                <div class="dashboard-header">
                    <div class="dashboard-title">
                        <h1>Reports & Analytics</h1>
                        <p>View system performance and reports</p>
                    </div>
                </div>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon icon-blue">üìä</div>
                        <div class="stat-info">
                            <h3>142</h3>
                            <p>Total Bookings (This Month)</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon icon-green">‚è±Ô∏è</div>
                        <div class="stat-info">
                            <h3>18 min</h3>
                            <p>Avg. Response Time</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon icon-orange">üíØ</div>
                        <div class="stat-info">
                            <h3>96%</h3>
                            <p>Completion Rate</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon icon-red">‚≠ê</div>
                        <div class="stat-info">
                            <h3>4.7</h3>
                            <p>Avg. Rating</p>
                        </div>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>Monthly Booking Trends</h2>
                    </div>
                    
                    <div class="map-container">
                        <div id="reportChart" style="height: 100%; display: flex; align-items: center; justify-content: center; background: #f8f9fa;">
                            <div style="text-align: center; color: #666;">
                                <div style="font-size: 48px; margin-bottom: 10px;">üìä</div>
                                <h3>Booking Analytics Chart</h3>
                                <p>Visual representation of booking trends would appear here</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Check if hospital is logged in
            const hospitalId = localStorage.getItem('hospitalId');
            if (!hospitalId) {
                window.location.href = 'hospital-login.html';
                return;
            }
            
            // Set hospital info
            document.getElementById('hospitalName').textContent = localStorage.getItem('hospitalName') || 'Hospital';
            
            // Set default datetime to now
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('bookingDateTime').value = now.toISOString().slice(0, 16);
            
            // Load data
            loadBookings();
            loadDrivers();
            loadStats();
            
            // Set up form submission
            document.getElementById('bookingForm').addEventListener('submit', createBooking);
        });
        
        // Show specific section
        function showSection(section) {
            // Hide all sections
            document.getElementById('dashboard-section').style.display = 'none';
            document.getElementById('bookings-section').style.display = 'none';
            document.getElementById('new-booking-section').style.display = 'none';
            document.getElementById('drivers-section').style.display = 'none';
            document.getElementById('reports-section').style.display = 'none';
            
            // Show selected section
            document.getElementById(section + '-section').style.display = 'block';
            
            // Update active menu item
            document.querySelectorAll('.sidebar-menu li').forEach(li => {
                li.classList.remove('active');
            });
            event.target.closest('li').classList.add('active');
        }
        
        // Load bookings
        function loadBookings() {
            // Simulate loading bookings
            setTimeout(() => {
                const sampleBookings = [
                    {
                        id: 'BK001',
                        patientName: 'John Smith',
                        contactNumber: '+1234567890',
                        type: 'Advanced Life Support',
                        time: '2023-06-15 14:30',
                        status: 'confirmed',
                        driver: 'Michael Johnson'
                    },
                    {
                        id: 'BK002',
                        patientName: 'Sarah Williams',
                        contactNumber: '+1234567891',
                        type: 'Basic Life Support',
                        time: '2023-06-15 15:45',
                        status: 'pending',
                        driver: 'Unassigned'
                    },
                    {
                        id: 'BK003',
                        patientName: 'Robert Davis',
                        contactNumber: '+1234567892',
                        type: 'Cardiac Care',
                        time: '2023-06-15 16:20',
                        status: 'completed',
                        driver: 'David Wilson'
                    }
                ];
                
                updateBookingsTable('recentBookingsTable', sampleBookings.slice(0, 5));
                updateBookingsTable('allBookingsTable', sampleBookings);
            }, 500);
        }
        
        // Update bookings table
        function updateBookingsTable(tableId, bookings) {
            const tableBody = document.getElementById(tableId);
            
            if (bookings.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="8" style="text-align: center;">No bookings found</td></tr>`;
                return;
            }
            
            let html = '';
            bookings.forEach(booking => {
                html += `
                    <tr>
                        <td>${booking.id}</td>
                        <td>${booking.patientName}</td>
                        <td>${booking.contactNumber}</td>
                        <td>${booking.type}</td>
                        <td>${booking.time}</td>
                        <td><span class="status-badge status-${booking.status}">${booking.status}</span></td>
                        <td>${booking.driver}</td>
                        <td class="action-buttons">
                            <button class="btn btn-primary" onclick="viewBooking('${booking.id}')">View</button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
        }
        
        // Load drivers
        function loadDrivers() {
            // Simulate loading drivers
            setTimeout(() => {
                const sampleDrivers = [
                    {
                        name: 'Michael Johnson',
                        vehicle: 'AMB-2023',
                        contact: '+1234567890',
                        status: 'available',
                        booking: 'None'
                    },
                    {
                        name: 'David Wilson',
                        vehicle: 'AMB-2024',
                        contact: '+1234567891',
                        status: 'busy',
                        booking: 'BK003'
                    },
                    {
                        name: 'James Brown',
                        vehicle: 'AMB-2025',
                        contact: '+1234567892',
                        status: 'available',
                        booking: 'None'
                    }
                ];
                
                updateDriversTable(sampleDrivers);
            }, 500);
        }
        
        // Update drivers table
        function updateDriversTable(drivers) {
            const tableBody = document.getElementById('driversTable');
            
            if (drivers.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="6" style="text-align: center;">No drivers found</td></tr>`;
                return;
            }
            
            let html = '';
            drivers.forEach(driver => {
                const statusClass = driver.status === 'available' ? 'status-confirmed' : 'status-pending';
                html += `
                    <tr>
                        <td>${driver.name}</td>
                        <td>${driver.vehicle}</td>
                        <td>${driver.contact}</td>
                        <td><span class="status-badge ${statusClass}">${driver.status}</span></td>
                        <td>${driver.booking}</td>
                        <td class="action-buttons">
                            <button class="btn btn-primary" onclick="contactDriver('${driver.name}')">Contact</button>
                        </td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
        }
        
        // Load statistics
        function loadStats() {
            // In a real app, this would come from the server
            document.getElementById('totalBookings').textContent = '24';
            document.getElementById('completedBookings').textContent = '18';
            document.getElementById('activeBookings').textContent = '4';
            document.getElementById('emergencyBookings').textContent = '2';
        }
        
        // Create new booking
        function createBooking(event) {
            event.preventDefault();
            
            // Get form data
            const formData = {
                patientName: document.getElementById('patientName').value,
                contactNumber: document.getElementById('contactNumber').value,
                pickupAddress: document.getElementById('pickupAddress').value,
                bookingDateTime: document.getElementById('bookingDateTime').value,
                ambulanceType: document.getElementById('ambulanceType').value,
                medicalCondition: document.getElementById('medicalCondition').value
            };
            
            // In a real app, you would send this to the server
            alert('Booking created successfully!');
            document.getElementById('bookingForm').reset();
            
            // Reset datetime to now
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('bookingDateTime').value = now.toISOString().slice(0, 16);
        }
        
        // View booking details
        function viewBooking(bookingId) {
            alert(`Viewing details for booking ${bookingId}\nIn a real application, this would show detailed booking information.`);
        }
        
        // Contact driver
        function contactDriver(driverName) {
            alert(`Contacting driver ${driverName}\nIn a real application, this would open a communication channel.`);
        }
        
        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('hospitalId');
                localStorage.removeItem('hospitalName');
                localStorage.removeItem('loggedInAs');
                window.location.href = 'hospital-login.html';
            }
        }
    </script>
</body>
</html>